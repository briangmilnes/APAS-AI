
 I have had you code Chap18 wrong.

 Recode ArraySeqStPer.rs using these definitions of scan and iScan. Keep
 the strange capitalization.

Definition 18.22 (The functions scan and iScan). The term “scan” refers to a computation
that reduces every prefix of a given sequence by repeatedly applying an associative binary
operation. The scan function has the type signature
scan (f : α ∗ α → α) (id : α) (a : Sα) : (Sα ∗ α),
where f is an associative function, a is the sequence, and id is the left identity element of f .
The expression scan f a evaluates to the cumulative “sum” with respect to f of all prefixes
of the sequence a. For this reason, the scan function is referred to as prefix sums.
We specify the semantics of scan in terms of reduce as follows.
scan f id a = ( 〈 reduce f id a[0 · · · (i − 1)] : 0 ≤ i < |a| 〉 ,
reduce f id a)
For the definition, we assume that a[0 · · · − 1] = 〈 〉.

When computing the result for position i, scan does not include the element of the input
sequence at that position. It is sometimes useful to do so. To this end, we define scanI (“I”
stands for “inclusive”).
We define the semantics of scanI in terms of reduce as follows.
scanI f id a = 〈 reduce f id a[0 · · · i] : 0 ≤ i < |a| 〉
Example 18.12 (Scan). Consider the sequence a = 〈 0, 1, 2 〉. The prefixes of a are
• 〈 〉
• 〈 0 〉
• 〈 0, 1 〉
• 〈 0, 1, 2 〉 .
The prefixes of a sequence are all the subsequences of the sequence that starts at its begin-
ning. Empty sequence is a prefix of any sequence. The computation scan ‘+‘ 0 〈 0, 1, 2 〉
can be written as
scan ‘+‘ 0 〈 0, 1, 2 〉 =( 〈 reduce ‘+‘ 0 〈 〉 ,
reduce ‘+‘ 0 〈 0 〉 ,
reduce ‘+‘ 0 〈 0, 1 〉
〉 ,
reduce ‘+‘ 0 〈 0, 1, 2 〉
)
=( 〈 0, 0, 1 〉 , 3 ) .
The computation scanI ‘+‘ 0 〈 0, 1, 2 〉 can be written as
scanI ‘+‘ 0 〈 0, 1, 2 〉 = 〈 reduce ‘+‘ 0 〈 0 〉 ,
reduce ‘+‘ 0 〈 0, 1 〉 ,
reduce ‘+‘ 0 〈 0, 1, 2, 〉
〉
= 〈 0, 1, 3 〉 .
Note (Scan versus reduce). Since scan can be specified in terms of reduce, one might be
tempted to argue that it is redundant. In fact, it is not: as we shall see, performing reduce
repeatedly on every prefix is not work efficient. Remarkably scan can be implemented by
performing essentially the same work and span of reduce.

 I have reviewed it and ArraySeqStPer.rs looks good.
Now recode all of the other versions

ArraySeqMtEph.rs
ArraySeqMtPer.rs
ArraySeqStEph.rs

to match.


 
